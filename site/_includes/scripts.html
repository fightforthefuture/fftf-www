{% if page.class != 'four-oh-four' %}<script type="text/javascript" src="https://fftf.io/js/client.js"></script>{% endif %}
{% if page.one_off_script %}<script type="text/javascript" src="/js/one-off/{{ page.one_off_script }}.js"></script>{% endif %}
<script type="text/javascript" src="/js/smoothscroll.min.js"></script>
<script type="text/javascript" src="/js/core.js"></script>
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  ga('create', '{{ site.googleanalytics }}', '{{ site.url | remove: "http://" | remove: "https://" }}');
  ga('send', 'pageview');

</script>
<script>
  (function() {
    function parseQuery(queryString) {
      var query = {};
      var pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');
      for (var i = 0; i < pairs.length; i++) {
        var pair = pairs[i].split('=');
        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');
      }
      return query;
    }

    var query = parseQuery(location.search);

    // exit if no 'redalert' widget set...
    if (query.widget !== 'redalert') return;

    window.RED_ALERT_OPTIONS = {
      alwaysShow: false,
      org: 'fftf',
      language: query.lang
    };

    var script = document.createElement('script');
    script.src = 'https://redalert.battleforthenet.com/widget.js';
    document.head.appendChild(script);
  })();
</script>
